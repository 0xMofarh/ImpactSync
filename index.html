<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุชุญูู ูุดุฑูุน ููุตุฉ ุงููุคุซุฑูู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #FDFBF7;
            color: #4A4A4A;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        .task-card {
            transition: all 0.3s ease-in-out;
        }
        .task-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .progress-bar-bg {
            background-color: #EAEAEA;
        }
        .progress-bar-fg {
            background-color: #8D8741;
            transition: width 0.5s ease-in-out;
        }
        [x-cloak] { display: none !important; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body x-data="projectDashboard()">
    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-[#659DBD]">ููุญุฉ ุชุญูู ูุดุฑูุน ููุตุฉ ุงููุคุซุฑูู</h1>
            <p class="text-lg mt-2 text-gray-600">ุฃุฏุงุฉ ุงูุนูู ุงูุฎุงุตุฉ ุจู ูุชุญููู ุงูุฎุทุฉ ุฅูู ูุงูุน</p>
        </header>

        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-[#8D8741]">ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุชูุฏู</h2>
            <div class="w-full progress-bar-bg rounded-full h-8">
                <div class="progress-bar-fg text-xs font-medium text-blue-100 text-center p-1 leading-none rounded-full h-8 flex items-center justify-center" 
                     :style="`width: ${overallProgress()}%`">
                    <span x-text="`${overallProgress()}%`"></span>
                </div>
            </div>
        </div>

        <div class="flex justify-center mb-8 border-b-2 border-gray-200">
            <button @click="activeTab = 'tasks'" 
                    :class="{'border-[#8D8741] text-[#8D8741]': activeTab === 'tasks', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'tasks'}"
                    class="py-4 px-6 block font-medium text-lg border-b-4 focus:outline-none">
                ๐ ูุงุฆูุฉ ุงูููุงู
            </button>
            <button @click="activeTab = 'timeline'"
                    :class="{'border-[#8D8741] text-[#8D8741]': activeTab === 'timeline', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'timeline'}"
                    class="py-4 px-6 block font-medium text-lg border-b-4 focus:outline-none">
                โณ ุงูุฌุฏูู ุงูุฒููู
            </button>
        </div>

        <main>
            <div x-show="activeTab === 'tasks'" x-cloak>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <template x-for="(phase, index) in phases" :key="index">
                        <div class="task-card bg-white rounded-2xl shadow-md p-5 flex flex-col">
                            <div class="flex justify-between items-start mb-3">
                                <h3 class="text-xl font-bold text-[#659DBD]" x-text="phase.title"></h3>
                                <span class="text-sm font-semibold bg-[#F4E0B9] text-[#BC6C25] py-1 px-3 rounded-full" x-text="`ุงููุฑุญูุฉ ${index + 1}`"></span>
                            </div>
                            <p class="text-gray-600 mb-4 flex-grow" x-text="phase.description"></p>
                            
                            <div class="mb-4">
                                <div class="flex justify-between mb-1">
                                    <span class="text-base font-medium text-[#8D8741]">ุงูุชูุฏู</span>
                                    <span class="text-sm font-medium text-[#8D8741]" x-text="`${phaseProgress(phase)}%`"></span>
                                </div>
                                <div class="w-full progress-bar-bg rounded-full h-2.5">
                                    <div class="progress-bar-fg h-2.5 rounded-full" :style="`width: ${phaseProgress(phase)}%`"></div>
                                </div>
                            </div>

                            <button @click="phase.expanded = !phase.expanded" class="w-full text-left text-[#BC6C25] font-semibold mt-auto flex items-center justify-between">
                                <span x-text="phase.expanded ? 'ุฅุฎูุงุก ุงูููุงู' : 'ุนุฑุถ ุงูููุงู'"></span>
                                <svg class="w-4 h-4 transition-transform" :class="{'rotate-180': phase.expanded}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>

                            <div x-show="phase.expanded" x-collapse x-cloak>
                                <ul class="mt-4 space-y-3">
                                    <template x-for="(task, taskIndex) in phase.tasks" :key="taskIndex">
                                        <li class="flex items-start">
                                            <input type="checkbox" :id="`task_${index}_${taskIndex}`" x-model="task.completed" class="mt-1 form-checkbox h-5 w-5 text-[#8D8741] rounded border-gray-300 focus:ring-[#659DBD]">
                                            <label :for="`task_${index}_${taskIndex}`" class="mr-3 text-gray-700" :class="{'line-through text-gray-400': task.completed}" x-text="task.name"></label>
                                        </li>
                                    </template>
                                </ul>
                            </div>
                        </div>
                    </template>
                </div>
            </div>

            <div x-show="activeTab === 'timeline'" x-cloak>
                 <div class="bg-white rounded-2xl shadow-lg p-6">
                    <div class="chart-container">
                        <canvas id="timelineChart"></canvas>
                    </div>
                </div>
            </div>
        </main>

    </div>

    <script>
        function projectDashboard() {
            return {
                activeTab: 'tasks',
                phases: [
                    {
                        title: 'ุงูุชุฃุณูุณ ุงููุนูุงุฑู ูุงูุฅุนุฏุงุฏ',
                        description: 'ูุถุน ุญุฌุฑ ุงูุฃุณุงุณ ูููุดุฑูุน ุจุงุฎุชูุงุฑ ุงูุชูููุงุช ุงูููุงุณุจุฉ ูุฅุนุฏุงุฏ ุจูุฆุฉ ุงูุนูู.',
                        duration: [0, 2], 
                        expanded: false,
                        tasks: [
                            { name: 'ุงุฎุชูุงุฑ ุฅุทุงุฑ ุนูู ุงููุงุฌูุฉ ุงูุฎูููุฉ (Django)', completed: false },
                            { name: 'ุงุฎุชูุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช (PostgreSQL)', completed: false },
                            { name: 'ุฅุนุฏุงุฏ ุจูุฆุฉ ุงููุดุฑูุน (Git, venv)', completed: false },
                            { name: 'ุชูููู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช', completed: false },
                        ]
                    },
                    {
                        title: 'ุชุตููู ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช',
                        description: 'ุชุฑุฌูุฉ ูุชุทูุจุงุช ุงูููุตุฉ ุฅูู ููุงุฐุฌ ุจูุงูุงุช ููููู ูุงุนุฏุฉ ุจูุงูุงุช ูุชูู.',
                        duration: [2, 4],
                        expanded: false,
                        tasks: [
                            { name: 'ููุฐุฌุฉ ุงููุณุชุฎุฏู ูุงููููุงุช ุงูุดุฎุตูุฉ (User, Profiles)', completed: false },
                            { name: 'ููุฐุฌุฉ ุงููุญุชูู ูุงูููุตุงุช (Platforms, Content)', completed: false },
                            { name: 'ููุฐุฌุฉ ุงูุญููุงุช ูุงูุงุดุชุฑุงูุงุช (Campaigns, Subscriptions)', completed: false },
                            { name: 'ุฑุณู ูุฎุทุท ุนูุงูุงุช ุงูููุงูุงุช (ERD)', completed: false },
                        ]
                    },
                    {
                        title: 'ุจูุงุก ุงูููุชุฌ ุงูุฃููู (MVP)',
                        description: 'ุชุทููุฑ ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ ูุชูุฏูู ููุชุฌ ูุธููู ูุงุจู ููุงุฎุชุจุงุฑ ูุงูุชุญูู.',
                        duration: [4, 9],
                        expanded: false,
                        tasks: [
                            { name: 'ุชูููุฐ ูุธุงู ุงููุตุงุฏูุฉ ูุงูุชุณุฌูู (django-allauth)', completed: false },
                            { name: 'ุจูุงุก ููุญุฉ ุชุญูู ุงููุนูููู ุงูุฃุณุงุณูุฉ', completed: false },
                            { name: 'ุชุทููุฑ ูููุฐุฌ ุชุณุฌูู ุงููุคุซุฑูู', completed: false },
                            { name: 'ุชูููุฐ ุงุณุชูุฑุงุฏ/ุชุตุฏูุฑ ูููุงุช Excel (django-import-export)', completed: false },
                        ]
                    },
                    {
                        title: 'ุชุญููู ุงูุฏุฎู ูููุทู ุงูุงุดุชุฑุงูุงุช',
                        description: 'ุจูุงุก ูุญุฑู ุชุญููู ุงูุฏุฎู ุนุจุฑ ุงูุจุงูุงุช ูุฏูุฌ ุจูุงุจุงุช ุงูุฏูุน.',
                        duration: [9, 12],
                        expanded: false,
                        tasks: [
                            { name: 'ุชูููุฐ ููุงุฐุฌ ุงูุจุงูุงุช ูุงูุงุดุชุฑุงูุงุช', completed: false },
                            { name: 'ุฏูุฌ ุจูุงุจุฉ ุงูุฏูุน (Stripe/Tap/Noonpay)', completed: false },
                            { name: 'ุฅุนุฏุงุฏ ููุทู ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ ุงููุฌุงููุฉ', completed: false },
                            { name: 'ุชุทููุฑ ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช ููุดุฑูุงุช', completed: false },
                        ]
                    },
                    {
                        title: 'ุชูุงูู ุงูุจูุงูุงุช ุงููุชูุฏู',
                        description: 'ุชุทููุฑ ุงููุธุงุฆู ุงููุชูุฏูุฉ ุงูุชู ุชุฑุชูุฒ ุนูู ุฌูุน ุงูุจูุงูุงุช ูุชุญููููุง.',
                        duration: [12, 17],
                        expanded: false,
                        tasks: [
                            { name: 'ุจูุงุก ูุธุงู ุงูุชุฌููุน ุงูุขูู ููุจูุงูุงุช (API & Celery)', completed: false },
                            { name: 'ุชูููุฐ ูุงุฌูุงุช OAuth ูููุคุซุฑูู', completed: false },
                            { name: 'ุชุทููุฑ ูุธุงู ุงูุชุตููุฉ ูุงูุจุญุซ ุงููุชูุฏู (django-filter)', completed: false },
                            { name: 'ุจูุงุก ูุธุงู ุฅุฏุงุฑุฉ ุงูุญููุงุช ูุงูุชูุงุฑูุฑ', completed: false },
                        ]
                    },
                    {
                        title: 'ููุฒุงุช ุงูุฐูุงุก ูุงูุชูุงุนู',
                        description: 'ุฅุถุงูุฉ ุทุจูุงุช ูู ุงูุชุญููู ูุงูุชูุงุนู ูุชูููุฒ ุงูููุตุฉ ุนู ุงูููุงูุณูู.',
                        duration: [17, 20],
                        expanded: false,
                        tasks: [
                            { name: 'ุชุทููุฑ ูุธุงู ุชูููู ุงููุคุซุฑูู (django-star-ratings)', completed: false },
                            { name: 'ุจูุงุก ูุธุงู ุงูุชุตููู ุงูุขูู ููุฃุฏุงุก (Celery & Scikit-learn)', completed: false },
                            { name: 'ุชูููุฐ ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูุงุณุชุจุงูู', completed: false },
                        ]
                    },
                    {
                        title: 'ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูุงููุดุฑ',
                        description: 'ุชุตููู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูููุงุฆูุฉ ููุดุฑ ุงูุชุทุจูู ููููู ูุชุงุญุงู ููุฌูููุฑ.',
                        duration: [20, 24],
                        expanded: false,
                        tasks: [
                            { name: 'ุชุทููุฑ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุงูุชูุงุนููุฉ (Alpine.js)', completed: false },
                            { name: 'ุฅุนุฏุงุฏ ุฎุงุฏู ุงููุดุฑ (VPS, Nginx, Gunicorn)', completed: false },
                            { name: 'ุชูููู ุฎุฏูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููุฏุงุฑุฉ (AWS RDS)', completed: false },
                            { name: 'ุฅุนุฏุงุฏ CI/CD pipeline ูููุดุฑ ุงูุชููุงุฆู', completed: false },
                        ]
                    }
                ],
                init() {
                    this.$watch('activeTab', (value) => {
                        if (value === 'timeline') {
                            this.$nextTick(() => this.renderTimelineChart());
                        }
                    });
                },
                phaseProgress(phase) {
                    const totalTasks = phase.tasks.length;
                    if (totalTasks === 0) return 0;
                    const completedTasks = phase.tasks.filter(task => task.completed).length;
                    return Math.round((completedTasks / totalTasks) * 100);
                },
                overallProgress() {
                    const allTasks = this.phases.flatMap(phase => phase.tasks);
                    const totalTasks = allTasks.length;
                    if (totalTasks === 0) return 0;
                    const completedTasks = allTasks.filter(task => task.completed).length;
                    return Math.round((completedTasks / totalTasks) * 100);
                },
                timelineChart: null,
                renderTimelineChart() {
                    const ctx = document.getElementById('timelineChart').getContext('2d');
                    
                    if (this.timelineChart) {
                        this.timelineChart.destroy();
                    }

                    const data = {
                        labels: this.phases.map(p => p.title),
                        datasets: [{
                            label: 'ุงูุฌุฏูู ุงูุฒููู ูููุดุฑูุน (ุจุงูุฃุณุงุจูุน)',
                            data: this.phases.map(p => p.duration),
                            backgroundColor: 'rgba(141, 135, 65, 0.6)',
                            borderColor: 'rgba(141, 135, 65, 1)',
                            borderWidth: 1,
                            borderRadius: 4,
                            borderSkipped: false,
                        }]
                    };

                    const options = {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'ุงูุฃุณุงุจูุน'
                                }
                            },
                            y: {
                                ticks: {
                                    font: {
                                        size: 12
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const value = context.raw;
                                        return ` ูู ุงูุฃุณุจูุน ${value[0]} ุฅูู ุงูุฃุณุจูุน ${value[1]}`;
                                    }
                                }
                            }
                        }
                    };

                    this.timelineChart = new Chart(ctx, {
                        type: 'bar',
                        data: data,
                        options: options
                    });
                }
            }
        }
    </script>
</body>
</html>

